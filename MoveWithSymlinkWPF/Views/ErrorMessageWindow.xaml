<Window x:Class="MoveWithSymlinkWPF.Views.ErrorMessageWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="文件占用检测"
        Width="600"
        MinHeight="300"
        MaxHeight="700"
        SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F5F5">

    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="LineHeight" Value="22"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 图标和标题 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
            <Grid Width="40" Height="40" Margin="0,0,15,0">
                <Ellipse Fill="#FFF4E5"/>
                <TextBlock Text="⚠" FontSize="24"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"/>
            </Grid>
            <TextBlock Text="文件占用检测"
                      FontSize="18"
                      FontWeight="Bold"
                      VerticalAlignment="Center"/>
        </StackPanel>

        <!-- 错误消息区域 -->
        <ScrollViewer Grid.Row="2"
                     MaxHeight="400"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalScrollBarVisibility="Disabled"
                     Margin="0,0,0,20">
            <TextBlock x:Name="MessageTextBlock"
                      Text="{Binding ErrorMessage}"
                      FontSize="13"
                      Foreground="#333333"
                      Padding="10"
                      Background="White"
                      TextWrapping="Wrap"/>
        </ScrollViewer>

        <!-- 按钮区域 -->
        <StackPanel Grid.Row="3"
                   Orientation="Horizontal"
                   HorizontalAlignment="Right">
            <Button x:Name="RetryButton"
                   Content="确定（重新检测）"
                   Width="140"
                   Height="35"
                   Margin="0,0,10,0"
                   Background="#1976D2"
                   Foreground="White"
                   FontSize="13"
                   Cursor="Hand"
                   Click="RetryButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#1976D2"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                           CornerRadius="4"
                                           Padding="10,5">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1565C0"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button x:Name="CancelButton"
                   Content="取消"
                   Width="100"
                   Height="35"
                   Background="#E0E0E0"
                   Foreground="#333333"
                   FontSize="13"
                   Cursor="Hand"
                   Click="CancelButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#E0E0E0"/>
                        <Setter Property="Foreground" Value="#333333"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                           CornerRadius="4"
                                           Padding="10,5">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#BDBDBD"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
