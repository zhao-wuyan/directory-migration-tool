<Window x:Class="MoveWithSymlinkWPF.Views.FolderPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="é€‰æ‹©æ–‡ä»¶å¤¹"
        Height="600"
        Width="800"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        ResizeMode="CanResize"
        TextOptions.TextFormattingMode="Display"
        TextOptions.TextRenderingMode="ClearType"
        UseLayoutRounding="True"
        FontFamily="Microsoft YaHei UI, Segoe UI, Microsoft YaHei">
    
    <Window.Resources>
        <!-- ç¬¦å·é“¾æŽ¥å›¾æ ‡æ ·å¼ -->
        <Style x:Key="SymlinkIconStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#FF6B9BD1"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="ToolTip" Value="è¿™æ˜¯ä¸€ä¸ªç¬¦å·é“¾æŽ¥"/>
        </Style>
        
        <!-- æ–‡ä»¶å¤¹é¡¹ç›®æ ·å¼ -->
        <Style x:Key="FolderItemStyle" TargetType="ListBoxItem">
            <Setter Property="Padding" Value="4,3"/>
            <Setter Property="Margin" Value="0,1"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F0F0F0"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#E3F2FD"/>
                    <Setter Property="BorderBrush" Value="#2196F3"/>
                    <Setter Property="BorderThickness" Value="1"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- æ ‡é¢˜ -->
            <RowDefinition Height="Auto"/>  <!-- å¯¼èˆªæ  -->
            <RowDefinition Height="*"/>     <!-- ä¸»å†…å®¹åŒºï¼ˆå·¦ä¾§å¿«é€Ÿè®¿é—® + å³ä¾§æ–‡ä»¶å¤¹åˆ—è¡¨ï¼‰ -->
            <RowDefinition Height="Auto"/>  <!-- é€‰ä¸­è·¯å¾„ -->
            <RowDefinition Height="Auto"/>  <!-- æŒ‰é’® -->
        </Grid.RowDefinitions>
        
        <!-- æ ‡é¢˜å’Œè¯´æ˜Ž -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="é€‰æ‹©æ–‡ä»¶å¤¹" 
                      FontSize="18" 
                      FontWeight="Bold" 
                      Margin="0,0,0,5"/>
            <TextBlock Text="ç¬¦å·é“¾æŽ¥å°†æ˜¾ç¤º ðŸ”— å›¾æ ‡ï¼ŒåŒå‡»æ–‡ä»¶å¤¹å¯è¿›å…¥ï¼ŒåŒå‡»ç¬¦å·é“¾æŽ¥å¯é€‰æ‹©"
                      FontSize="12"
                      Foreground="#666666"
                      TextWrapping="Wrap"/>
        </StackPanel>
        
        <!-- å½“å‰è·¯å¾„å’Œå¯¼èˆª -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <Button Grid.Column="0" 
                    Content="â¬† ä¸Šçº§" 
                    Command="{Binding NavigateUpCommand}"
                    IsEnabled="{Binding CanNavigateUp}"
                    Padding="10,5"
                    Margin="0,0,5,0"/>
            
            <Button Grid.Column="1" 
                    Content="ðŸ  æ ¹ç›®å½•" 
                    Command="{Binding NavigateToRootCommand}"
                    Padding="10,5"
                    Margin="0,0,5,0"/>
            
            <TextBox Grid.Column="2" 
                     Text="{Binding CurrentPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     VerticalContentAlignment="Center"
                     Padding="5"
                     IsReadOnly="False"/>
            
            <Button Grid.Column="3" 
                    Content="è½¬åˆ°" 
                    Command="{Binding NavigateToPathCommand}"
                    Padding="10,5"
                    Margin="5,0,0,0"/>
            
            <Button Grid.Column="4"
                    Content="âœ“ é€‰æ‹©å½“å‰"
                    Command="{Binding SelectCurrentPathCommand}"
                    Padding="10,5"
                    Margin="5,0,0,0"
                    ToolTip="é€‰æ‹©å½“å‰æ˜¾ç¤ºçš„ç›®å½•"
                    Background="#E8F5E9"
                    Foreground="#2E7D32"
                    BorderBrush="#4CAF50"/>
        </Grid>
        
        <!-- ä¸»å†…å®¹åŒºï¼šå·¦ä¾§å¿«é€Ÿè®¿é—® + å³ä¾§æ–‡ä»¶å¤¹åˆ—è¡¨ -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>  <!-- å¿«é€Ÿè®¿é—®å®½åº¦ -->
                <ColumnDefinition Width="*"/>    <!-- æ–‡ä»¶å¤¹åˆ—è¡¨ -->
            </Grid.ColumnDefinitions>
            
            <!-- å·¦ä¾§ï¼šå¿«é€Ÿè®¿é—® -->
            <Border Grid.Column="0" 
                    BorderBrush="#CCCCCC" 
                    BorderThickness="1"
                    Background="#FAFAFA"
                    Margin="0,0,5,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- å¿«é€Ÿè®¿é—®æ ‡é¢˜ -->
                    <Border Grid.Row="0" 
                            Background="#F5F5F5" 
                            BorderBrush="#CCCCCC" 
                            BorderThickness="0,0,0,1"
                            Padding="8,6">
                        <TextBlock Text="å¿«é€Ÿè®¿é—®" 
                                  FontWeight="Bold" 
                                  FontSize="12"/>
                    </Border>
                    
                    <!-- å¿«é€Ÿè®¿é—®åˆ—è¡¨ -->
                    <ListBox Grid.Row="1"
                             ItemsSource="{Binding QuickAccessPaths}"
                             SelectedItem="{Binding SelectedQuickAccessPath}"
                             BorderThickness="0"
                             Background="Transparent"
                             Padding="4">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" 
                                           Margin="0,2">
                                    <TextBlock Text="{Binding Icon}" 
                                              Margin="0,0,6,0" 
                                              FontSize="13"
                                              VerticalAlignment="Center"/>
                                    <StackPanel>
                                        <TextBlock Text="{Binding DisplayName}" 
                                                  FontWeight="SemiBold"
                                                  FontSize="11"
                                                  VerticalAlignment="Center"
                                                  TextTrimming="CharacterEllipsis"/>
                                        <TextBlock Text="{Binding Path}" 
                                                  Foreground="#888888"
                                                  FontSize="9"
                                                  TextTrimming="CharacterEllipsis"
                                                  VerticalAlignment="Center"/>
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Padding" Value="4,3"/>
                                <Setter Property="Margin" Value="0,1"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#E8E8E8"/>
                                    </Trigger>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#CCE4F7"/>
                                        <Setter Property="BorderBrush" Value="#0078D7"/>
                                        <Setter Property="BorderThickness" Value="1"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListBox.ItemContainerStyle>
                    </ListBox>
                </Grid>
            </Border>
            
            <!-- å³ä¾§ï¼šæ–‡ä»¶å¤¹åˆ—è¡¨ -->
            <Border Grid.Column="1" 
                BorderBrush="#CCCCCC" 
                BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- åˆ—æ ‡é¢˜ -->
                <Border Grid.Row="0" 
                        Background="#F5F5F5" 
                        BorderBrush="#CCCCCC" 
                        BorderThickness="0,0,0,1"
                        Padding="6,4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="150"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="åç§°" FontWeight="Bold" FontSize="12"/>
                        <TextBlock Grid.Column="1" Text="ç±»åž‹" FontWeight="Bold" FontSize="12"/>
                    </Grid>
                </Border>
                
                <!-- æ–‡ä»¶å¤¹åˆ—è¡¨ -->
                <ListBox Grid.Row="1"
                         ItemsSource="{Binding Folders}"
                         SelectedItem="{Binding SelectedFolder}"
                         ItemContainerStyle="{StaticResource FolderItemStyle}"
                         BorderThickness="0"
                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                         MouseDoubleClick="ListBox_MouseDoubleClick">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="150"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" Orientation="Horizontal">
                                    <!-- æ–‡ä»¶å¤¹å›¾æ ‡ -->
                                    <TextBlock Text="ðŸ“" 
                                              Margin="0,0,6,0" 
                                              FontSize="14"
                                              VerticalAlignment="Center"/>
                                    
                                    <!-- æ–‡ä»¶å¤¹åç§° -->
                                    <TextBlock Text="{Binding Name}" 
                                              VerticalAlignment="Center"
                                              FontSize="13"
                                              TextTrimming="CharacterEllipsis"/>
                                    
                                    <!-- ç¬¦å·é“¾æŽ¥æ ‡è¯† -->
                                    <TextBlock Text=" ðŸ”—" 
                                              Style="{StaticResource SymlinkIconStyle}"
                                              Visibility="{Binding IsSymlinkVisibility}"
                                              VerticalAlignment="Center"
                                              Margin="4,0,0,0"
                                              FontSize="12"/>
                                </StackPanel>
                                
                                <TextBlock Grid.Column="1" 
                                          Text="{Binding TypeDescription}" 
                                          Foreground="#666666"
                                          FontSize="12"
                                          VerticalAlignment="Center"
                                          TextTrimming="CharacterEllipsis"/>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Border>
        </Grid>
        
        <!-- é€‰ä¸­çš„è·¯å¾„æ˜¾ç¤º -->
        <Border Grid.Row="3" 
                Background="#F9F9F9" 
                BorderBrush="#CCCCCC" 
                BorderThickness="1"
                Padding="10"
                Margin="0,10,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" 
                          Text="å·²é€‰æ‹©:" 
                          FontWeight="Bold"
                          Margin="0,0,0,5"/>
                
                <TextBox Grid.Row="1" 
                         Text="{Binding SelectedPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         IsReadOnly="False"
                         VerticalContentAlignment="Center"
                         Padding="5"/>
            </Grid>
        </Border>
        
        <!-- åº•éƒ¨æŒ‰é’® -->
        <StackPanel Grid.Row="4" 
                   Orientation="Horizontal" 
                   HorizontalAlignment="Right">
            <Button Content="ç¡®å®š"
                    Command="{Binding ConfirmCommand}"
                    IsEnabled="{Binding HasSelection}"
                    Width="100"
                    Height="32"
                    Margin="0,0,10,0"
                    Background="#2196F3"
                    BorderThickness="0"
                    Cursor="Hand"/>
            
            <Button Content="å–æ¶ˆ"
                    Command="{Binding CancelCommand}"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Width="100"
                    Height="32"/>
        </StackPanel>
    </Grid>
</Window>

